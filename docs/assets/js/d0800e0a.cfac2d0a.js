"use strict";(globalThis.webpackChunkphysical_ai_textbook=globalThis.webpackChunkphysical_ai_textbook||[]).push([[2679],{1465:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"module-1-ros2/multi-node-systems","title":"Multi-Node Systems","description":"Design and implement complex robotic systems with multiple interconnected ROS 2 nodes using launch files and best practices","source":"@site/docs/module-1-ros2/multi-node-systems.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/multi-node-systems","permalink":"/GIAIC-HACKATON-1-PROJECT-1/docs/module-1-ros2/multi-node-systems","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-ros2/multi-node-systems.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"title":"Multi-Node Systems","description":"Design and implement complex robotic systems with multiple interconnected ROS 2 nodes using launch files and best practices","sidebar_label":"Multi-Node Systems","sidebar_position":6,"estimated_time":8,"week":5,"module":1,"prerequisites":["module-1-ros2/actions"],"learning_objectives":["Design multi-node architectures for complex robotic systems","Create launch files to coordinate multiple nodes and parameters","Implement inter-node communication patterns for distributed systems","Debug and monitor multi-node systems using ROS 2 tools"],"assessment_type":"ros2-package","difficulty_level":"intermediate","capstone_component":"communication-layer"},"sidebar":"tutorialSidebar","previous":{"title":"Actions","permalink":"/GIAIC-HACKATON-1-PROJECT-1/docs/module-1-ros2/actions"},"next":{"title":"Digital Twins in Robotics","permalink":"/GIAIC-HACKATON-1-PROJECT-1/docs/module-2/digital-twins"}}');var r=s(4848),t=s(8453);const o={title:"Multi-Node Systems",description:"Design and implement complex robotic systems with multiple interconnected ROS 2 nodes using launch files and best practices",sidebar_label:"Multi-Node Systems",sidebar_position:6,estimated_time:8,week:5,module:1,prerequisites:["module-1-ros2/actions"],learning_objectives:["Design multi-node architectures for complex robotic systems","Create launch files to coordinate multiple nodes and parameters","Implement inter-node communication patterns for distributed systems","Debug and monitor multi-node systems using ROS 2 tools"],assessment_type:"ros2-package",difficulty_level:"intermediate",capstone_component:"communication-layer"},l="Multi-Node Systems: Integrating ROS 2 Communication Patterns",a={},d=[{value:"Overview",id:"overview",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Chapter Contents",id:"chapter-contents",level:2},{value:"1. Multi-Node Architecture Patterns",id:"1-multi-node-architecture-patterns",level:3},{value:"2. Launch Files",id:"2-launch-files",level:3},{value:"3. Parameters and Configuration",id:"3-parameters-and-configuration",level:3},{value:"4. Namespaces and Remapping",id:"4-namespaces-and-remapping",level:3},{value:"5. ROS 2 Component Composition",id:"5-ros-2-component-composition",level:3},{value:"6. Debugging Multi-Node Systems",id:"6-debugging-multi-node-systems",level:3},{value:"Hands-On Labs",id:"hands-on-labs",level:2},{value:"Code Examples",id:"code-examples",level:2},{value:"Python Launch File Example",id:"python-launch-file-example",level:3},{value:"Multi-Node Communication Pattern",id:"multi-node-communication-pattern",level:3},{value:"System Design Best Practices",id:"system-design-best-practices",level:2},{value:"Assessment Project: ROS 2 Multi-Node Package",id:"assessment-project-ros-2-multi-node-package",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Resources",id:"resources",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"multi-node-systems-integrating-ros-2-communication-patterns",children:"Multi-Node Systems: Integrating ROS 2 Communication Patterns"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"Real-world robotic systems require multiple cooperating nodes to handle perception, planning, control, and execution. In this chapter, you'll learn to design and implement multi-node architectures using all ROS 2 communication patterns you've learned."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Duration:"})," 8 hours\r\n",(0,r.jsx)(n.strong,{children:"Week:"})," 5\r\n",(0,r.jsx)(n.strong,{children:"Prerequisites:"})," Understanding of nodes, topics, services, and actions"]}),"\n",(0,r.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Design modular multi-node architectures for robotic systems"}),"\n",(0,r.jsx)(n.li,{children:"Create launch files to start and configure multiple nodes"}),"\n",(0,r.jsx)(n.li,{children:"Implement parameter servers for dynamic configuration"}),"\n",(0,r.jsx)(n.li,{children:"Use namespaces and remapping for node reusability"}),"\n",(0,r.jsx)(n.li,{children:"Debug communication issues in distributed systems"}),"\n",(0,r.jsx)(n.li,{children:"Apply ROS 2 best practices for scalable system design"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"chapter-contents",children:"Chapter Contents"}),"\n",(0,r.jsx)(n.h3,{id:"1-multi-node-architecture-patterns",children:"1. Multi-Node Architecture Patterns"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Content to be added: Perception-planning-control pipeline, hierarchical architectures, distributed sensing."})}),"\n",(0,r.jsx)(n.h3,{id:"2-launch-files",children:"2. Launch Files"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Content to be added: Python launch files, XML/YAML configurations, parameter passing, node composition."})}),"\n",(0,r.jsx)(n.h3,{id:"3-parameters-and-configuration",children:"3. Parameters and Configuration"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Content to be added: Parameter declaration, dynamic reconfiguration, parameter files (YAML)."})}),"\n",(0,r.jsx)(n.h3,{id:"4-namespaces-and-remapping",children:"4. Namespaces and Remapping"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Content to be added: Topic remapping, namespace isolation, multi-robot systems."})}),"\n",(0,r.jsx)(n.h3,{id:"5-ros-2-component-composition",children:"5. ROS 2 Component Composition"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Content to be added: Composable nodes, intra-process communication, performance optimization."})}),"\n",(0,r.jsx)(n.h3,{id:"6-debugging-multi-node-systems",children:"6. Debugging Multi-Node Systems"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Content to be added: rqt_graph, ros2 node list, topic echo, logging strategies."})}),"\n",(0,r.jsx)(n.h2,{id:"hands-on-labs",children:"Hands-On Labs"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Lab 5.1: Sensor Fusion System"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Lab instructions to be added: Build a multi-node system with IMU, GPS, and odometry fusion."})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Lab 5.2: Launch File Configuration"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Lab instructions to be added: Create a launch file that starts 5+ nodes with parameter configuration."})}),"\n",(0,r.jsx)(n.h2,{id:"code-examples",children:"Code Examples"}),"\n",(0,r.jsx)(n.h3,{id:"python-launch-file-example",children:"Python Launch File Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# Dependencies: launch>=1.0.0, launch_ros>=0.17.0\r\nfrom launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    return LaunchDescription([\r\n        Node(\r\n            package='sensor_pkg',\r\n            executable='imu_node',\r\n            name='imu_sensor',\r\n            parameters=[{'publish_rate': 100}]\r\n        ),\r\n        Node(\r\n            package='sensor_pkg',\r\n            executable='gps_node',\r\n            name='gps_sensor',\r\n            parameters=[{'publish_rate': 10}]\r\n        ),\r\n        Node(\r\n            package='fusion_pkg',\r\n            executable='sensor_fusion',\r\n            name='fusion_node',\r\n            parameters=[\r\n                {'use_imu': True},\r\n                {'use_gps': True}\r\n            ],\r\n            remappings=[\r\n                ('imu_in', '/imu_sensor/data'),\r\n                ('gps_in', '/gps_sensor/fix')\r\n            ]\r\n        )\r\n    ])\n"})}),"\n",(0,r.jsx)(n.h3,{id:"multi-node-communication-pattern",children:"Multi-Node Communication Pattern"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# Dependencies: rclpy>=3.3.0\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom sensor_msgs.msg import Imu\r\nfrom nav_msgs.msg import Odometry\r\nfrom geometry_msgs.msg import PoseStamped\r\n\r\nclass SensorFusionNode(Node):\r\n    \"\"\"Fuses IMU and odometry data for state estimation.\"\"\"\r\n\r\n    def __init__(self):\r\n        super().__init__('sensor_fusion_node')\r\n\r\n        # Declare parameters\r\n        self.declare_parameter('fusion_rate', 50.0)\r\n        self.declare_parameter('imu_topic', '/imu/data')\r\n        self.declare_parameter('odom_topic', '/odom')\r\n\r\n        # Get parameters\r\n        fusion_rate = self.get_parameter('fusion_rate').value\r\n        imu_topic = self.get_parameter('imu_topic').value\r\n        odom_topic = self.get_parameter('odom_topic').value\r\n\r\n        # Create subscribers\r\n        self.imu_sub = self.create_subscription(\r\n            Imu, imu_topic, self.imu_callback, 10\r\n        )\r\n        self.odom_sub = self.create_subscription(\r\n            Odometry, odom_topic, self.odom_callback, 10\r\n        )\r\n\r\n        # Create publisher\r\n        self.pose_pub = self.create_publisher(\r\n            PoseStamped, '/fused_pose', 10\r\n        )\r\n\r\n        # Fusion timer\r\n        self.timer = self.create_timer(\r\n            1.0 / fusion_rate, self.fusion_callback\r\n        )\r\n\r\n        # State variables\r\n        self.latest_imu = None\r\n        self.latest_odom = None\r\n\r\n    def imu_callback(self, msg):\r\n        self.latest_imu = msg\r\n\r\n    def odom_callback(self, msg):\r\n        self.latest_odom = msg\r\n\r\n    def fusion_callback(self):\r\n        if self.latest_imu is None or self.latest_odom is None:\r\n            return\r\n\r\n        # Perform sensor fusion (simplified example)\r\n        fused_pose = PoseStamped()\r\n        fused_pose.header.stamp = self.get_clock().now().to_msg()\r\n        fused_pose.header.frame_id = 'map'\r\n\r\n        # Fuse position from odometry and orientation from IMU\r\n        fused_pose.pose.position = self.latest_odom.pose.pose.position\r\n        fused_pose.pose.orientation = self.latest_imu.orientation\r\n\r\n        self.pose_pub.publish(fused_pose)\r\n        self.get_logger().info('Published fused pose')\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Additional code examples to be added."})}),"\n",(0,r.jsx)(n.h2,{id:"system-design-best-practices",children:"System Design Best Practices"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Content to be added:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Single responsibility per node"}),"\n",(0,r.jsx)(n.li,{children:"Loose coupling through topics"}),"\n",(0,r.jsx)(n.li,{children:"Parameter-driven configuration"}),"\n",(0,r.jsx)(n.li,{children:"Graceful degradation strategies"}),"\n",(0,r.jsx)(n.li,{children:"Logging and diagnostics"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"assessment-project-ros-2-multi-node-package",children:"Assessment Project: ROS 2 Multi-Node Package"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Build a complete ROS 2 package demonstrating:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Sensor Layer"})," (3 nodes):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Simulated camera node (publishes image data)"}),"\n",(0,r.jsx)(n.li,{children:"Simulated lidar node (publishes point clouds)"}),"\n",(0,r.jsx)(n.li,{children:"IMU node (publishes orientation)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Processing Layer"})," (2 nodes):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Object detection node (subscribes to camera)"}),"\n",(0,r.jsx)(n.li,{children:"Obstacle detection node (subscribes to lidar)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Planning Layer"})," (1 node):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Navigation planner (uses services to query goals)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Control Layer"})," (1 node):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Velocity controller (executes navigation commands via actions)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Requirements:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Launch file starts all 7 nodes"}),"\n",(0,r.jsx)(n.li,{children:"Parameter file configures sensor rates"}),"\n",(0,r.jsx)(n.li,{children:"Service for setting navigation goals"}),"\n",(0,r.jsx)(n.li,{children:"Action for executing trajectories"}),"\n",(0,r.jsx)(n.li,{children:"Proper error handling and logging"}),"\n",(0,r.jsx)(n.li,{children:"Documentation with architecture diagram"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Success Criteria:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"All nodes run without errors"}),"\n",(0,r.jsx)(n.li,{children:"Communication verified with rqt_graph"}),"\n",(0,r.jsx)(n.li,{children:"Service calls work correctly"}),"\n",(0,r.jsx)(n.li,{children:"Action provides periodic feedback"}),"\n",(0,r.jsx)(n.li,{children:"System handles node failures gracefully"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Common issues to be added:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Topic name mismatches"}),"\n",(0,r.jsx)(n.li,{children:"QoS incompatibility between publishers and subscribers"}),"\n",(0,r.jsx)(n.li,{children:"Launch file parameter errors"}),"\n",(0,r.jsx)(n.li,{children:"Namespace conflicts"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"resources",children:"Resources"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Intermediate/Launch/Launch-Main.html",children:"ROS 2 Launch System"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Parameters/Understanding-ROS2-Parameters.html",children:"ROS 2 Parameters"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Concepts/About-Composition.html",children:"ROS 2 Composition"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Concepts/About-RQt.html",children:"RQT Tools"})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Module 1 Complete!"})," You've mastered ROS 2 fundamentals. Continue to ",(0,r.jsx)(n.a,{href:"/docs/module-2-digital-twin",children:"Module 2: Digital Twin Simulation"})," to learn about Gazebo and Unity ML-Agents."]})]})}function m(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var i=s(6540);const r={},t=i.createContext(r);function o(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);