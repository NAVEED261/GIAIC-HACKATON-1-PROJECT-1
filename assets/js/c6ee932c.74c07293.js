"use strict";(globalThis.webpackChunkphysical_ai_textbook=globalThis.webpackChunkphysical_ai_textbook||[]).push([[3407],{8072:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"module-1-ros2/actions","title":"Actions","description":"Implement long-running tasks with progress feedback and cancellation using ROS 2 actions","source":"@site/docs/module-1-ros2/actions.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/actions","permalink":"/GIAIC-HACKATON-1-PROJECT-1/docs/module-1-ros2/actions","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-ros2/actions.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Actions","description":"Implement long-running tasks with progress feedback and cancellation using ROS 2 actions","sidebar_label":"Actions","sidebar_position":5,"estimated_time":6,"week":4,"module":1,"prerequisites":["module-1-ros2/services"],"learning_objectives":["Understand the action communication pattern and when to use it","Create action servers for long-running tasks with feedback","Implement action clients with goal handling and cancellation","Define custom action types for robotics tasks"],"difficulty_level":"intermediate","capstone_component":"communication-layer"},"sidebar":"tutorialSidebar","previous":{"title":"Services","permalink":"/GIAIC-HACKATON-1-PROJECT-1/docs/module-1-ros2/services"},"next":{"title":"Multi-Node Systems","permalink":"/GIAIC-HACKATON-1-PROJECT-1/docs/module-1-ros2/multi-node-systems"}}');var s=i(4848),r=i(8453);const a={title:"Actions",description:"Implement long-running tasks with progress feedback and cancellation using ROS 2 actions",sidebar_label:"Actions",sidebar_position:5,estimated_time:6,week:4,module:1,prerequisites:["module-1-ros2/services"],learning_objectives:["Understand the action communication pattern and when to use it","Create action servers for long-running tasks with feedback","Implement action clients with goal handling and cancellation","Define custom action types for robotics tasks"],difficulty_level:"intermediate",capstone_component:"communication-layer"},c="Actions: Long-Running Tasks with Feedback",o={},l=[{value:"Overview",id:"overview",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Chapter Contents",id:"chapter-contents",level:2},{value:"1. Why Actions?",id:"1-why-actions",level:3},{value:"2. Action Architecture",id:"2-action-architecture",level:3},{value:"3. Action Components",id:"3-action-components",level:3},{value:"4. Creating Action Servers",id:"4-creating-action-servers",level:3},{value:"5. Creating Action Clients",id:"5-creating-action-clients",level:3},{value:"6. Custom Actions",id:"6-custom-actions",level:3},{value:"Hands-On Labs",id:"hands-on-labs",level:2},{value:"Code Examples",id:"code-examples",level:2},{value:"Python Action Server Example",id:"python-action-server-example",level:3},{value:"Python Action Client Example",id:"python-action-client-example",level:3},{value:"Robotics Use Cases",id:"robotics-use-cases",level:2},{value:"Goal Lifecycle and States",id:"goal-lifecycle-and-states",level:2},{value:"Assessment",id:"assessment",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Resources",id:"resources",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"actions-long-running-tasks-with-feedback",children:"Actions: Long-Running Tasks with Feedback"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"Actions extend the request-response pattern of services by adding support for long-running tasks, periodic feedback, and cancellation. In this chapter, you'll learn to implement actions for navigation, manipulation, and other tasks that require time to complete."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Duration:"})," 6 hours\r\n",(0,s.jsx)(n.strong,{children:"Week:"})," 4-5\r\n",(0,s.jsx)(n.strong,{children:"Prerequisites:"})," Understanding of services and asynchronous programming"]}),"\n",(0,s.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,s.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Explain when to use actions instead of topics or services"}),"\n",(0,s.jsx)(n.li,{children:"Create action servers that execute long-running tasks"}),"\n",(0,s.jsx)(n.li,{children:"Implement action clients that send goals and receive feedback"}),"\n",(0,s.jsx)(n.li,{children:"Handle goal acceptance, feedback publishing, and result delivery"}),"\n",(0,s.jsx)(n.li,{children:"Implement goal cancellation and preemption"}),"\n",(0,s.jsx)(n.li,{children:"Define custom action (.action) files for specific robotics tasks"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"chapter-contents",children:"Chapter Contents"}),"\n",(0,s.jsx)(n.h3,{id:"1-why-actions",children:"1. Why Actions?"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Content to be added: Comparison with topics and services, use cases (navigation, manipulation, trajectory execution)."})}),"\n",(0,s.jsx)(n.h3,{id:"2-action-architecture",children:"2. Action Architecture"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Content to be added: Goal-feedback-result pattern, action server/client model, state machine."})}),"\n",(0,s.jsx)(n.h3,{id:"3-action-components",children:"3. Action Components"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Content to be added: Goal, feedback, and result messages; action state transitions."})}),"\n",(0,s.jsx)(n.h3,{id:"4-creating-action-servers",children:"4. Creating Action Servers"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Content to be added: Python and C++ server implementations, goal handling, feedback publishing."})}),"\n",(0,s.jsx)(n.h3,{id:"5-creating-action-clients",children:"5. Creating Action Clients"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Content to be added: Sending goals, receiving feedback, handling results, cancellation."})}),"\n",(0,s.jsx)(n.h3,{id:"6-custom-actions",children:"6. Custom Actions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Content to be added: Defining .action files, message structure, building custom actions."})}),"\n",(0,s.jsx)(n.h2,{id:"hands-on-labs",children:"Hands-On Labs"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Lab 5.1: Fibonacci Action Server"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Lab instructions to be added: Implement an action server that computes Fibonacci sequences with progress feedback."})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Lab 5.2: Navigation Action Client"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Lab instructions to be added: Create an action client for robot navigation with waypoint feedback."})}),"\n",(0,s.jsx)(n.h2,{id:"code-examples",children:"Code Examples"}),"\n",(0,s.jsx)(n.h3,{id:"python-action-server-example",children:"Python Action Server Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Dependencies: rclpy>=3.3.0, action_tutorials_interfaces\r\nimport rclpy\r\nfrom rclpy.action import ActionServer\r\nfrom rclpy.node import Node\r\nfrom action_tutorials_interfaces.action import Fibonacci\r\n\r\nclass FibonacciActionServer(Node):\r\n    def __init__(self):\r\n        super().__init__('fibonacci_action_server')\r\n        self._action_server = ActionServer(\r\n            self,\r\n            Fibonacci,\r\n            'fibonacci',\r\n            self.execute_callback\r\n        )\r\n\r\n    def execute_callback(self, goal_handle):\r\n        self.get_logger().info('Executing goal...')\r\n\r\n        # Create feedback message\r\n        feedback_msg = Fibonacci.Feedback()\r\n        feedback_msg.sequence = [0, 1]\r\n\r\n        # Execute the Fibonacci sequence\r\n        for i in range(1, goal_handle.request.order):\r\n            feedback_msg.sequence.append(\r\n                feedback_msg.sequence[i] + feedback_msg.sequence[i-1]\r\n            )\r\n            self.get_logger().info(f'Feedback: {feedback_msg.sequence}')\r\n            goal_handle.publish_feedback(feedback_msg)\r\n\r\n        goal_handle.succeed()\r\n\r\n        # Create result message\r\n        result = Fibonacci.Result()\r\n        result.sequence = feedback_msg.sequence\r\n        return result\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    fibonacci_action_server = FibonacciActionServer()\r\n    rclpy.spin(fibonacci_action_server)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"python-action-client-example",children:"Python Action Client Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Dependencies: rclpy>=3.3.0, action_tutorials_interfaces\r\nimport rclpy\r\nfrom rclpy.action import ActionClient\r\nfrom rclpy.node import Node\r\nfrom action_tutorials_interfaces.action import Fibonacci\r\n\r\nclass FibonacciActionClient(Node):\r\n    def __init__(self):\r\n        super().__init__('fibonacci_action_client')\r\n        self._action_client = ActionClient(self, Fibonacci, 'fibonacci')\r\n\r\n    def send_goal(self, order):\r\n        goal_msg = Fibonacci.Goal()\r\n        goal_msg.order = order\r\n\r\n        self._action_client.wait_for_server()\r\n\r\n        self._send_goal_future = self._action_client.send_goal_async(\r\n            goal_msg,\r\n            feedback_callback=self.feedback_callback\r\n        )\r\n        self._send_goal_future.add_done_callback(self.goal_response_callback)\r\n\r\n    def feedback_callback(self, feedback_msg):\r\n        feedback = feedback_msg.feedback\r\n        self.get_logger().info(f'Received feedback: {feedback.sequence}')\r\n\r\n    def goal_response_callback(self, future):\r\n        goal_handle = future.result()\r\n        if not goal_handle.accepted:\r\n            self.get_logger().info('Goal rejected')\r\n            return\r\n\r\n        self.get_logger().info('Goal accepted')\r\n        self._get_result_future = goal_handle.get_result_async()\r\n        self._get_result_future.add_done_callback(self.get_result_callback)\r\n\r\n    def get_result_callback(self, future):\r\n        result = future.result().result\r\n        self.get_logger().info(f'Result: {result.sequence}')\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Additional code examples to be added."})}),"\n",(0,s.jsx)(n.h2,{id:"robotics-use-cases",children:"Robotics Use Cases"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Content to be added: Navigation (move_base), manipulation (MoveIt), autonomous charging, multi-step task execution."})}),"\n",(0,s.jsx)(n.h2,{id:"goal-lifecycle-and-states",children:"Goal Lifecycle and States"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Content to be added: State diagram showing PENDING, ACTIVE, SUCCEEDED, CANCELED, ABORTED states."})}),"\n",(0,s.jsx)(n.h2,{id:"assessment",children:"Assessment"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Practical Project:"})," Implement a pick-and-place action server with:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Goal: Target object pose"}),"\n",(0,s.jsx)(n.li,{children:"Feedback: Current gripper position and task stage"}),"\n",(0,s.jsx)(n.li,{children:"Result: Success/failure with error diagnostics"}),"\n",(0,s.jsx)(n.li,{children:"Cancellation support during approach phase"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Success Criteria:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Publishes feedback at 5 Hz minimum"}),"\n",(0,s.jsx)(n.li,{children:"Handles cancellation gracefully"}),"\n",(0,s.jsx)(n.li,{children:"Returns detailed error messages on failure"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Common action-related issues to be added: goal timeouts, feedback delays, cancellation race conditions."})}),"\n",(0,s.jsx)(n.h2,{id:"resources",children:"Resources"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Intermediate/Writing-an-Action-Server-Client/Py.html",children:"ROS 2 Actions Tutorial"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Intermediate/Creating-an-Action.html",children:"Creating Custom Action Types"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://design.ros2.org/articles/actions.html",children:"Action Design Guidelines"})}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Next Chapter:"})," ",(0,s.jsx)(n.a,{href:"/docs/module-1-ros2/multi-node-systems",children:"Multi-Node Systems"})," - Integrate all communication patterns into complex robotic systems"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>c});var t=i(6540);const s={},r=t.createContext(s);function a(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);